{% extends "base.html" %}

{% block title %}Dashboard - Portal de Operaciones{% endblock %}

{% block content %}
<div class="page-header">
    <h2>Dashboard de Operaciones</h2>
</div>

<div class="section">
    <h3>Estadísticas por Estado</h3>
    <div class="stats-grid">
        <div class="stat-card stat-pending">
            <h4>Pendientes</h4>
            <p class="stat-number">{{ stats.pending }}</p>
            <a href="{{ url_for('operations_list', status='pending') }}" class="btn btn-sm btn-secondary">Ver</a>
        </div>
        <div class="stat-card stat-success">
            <h4>Validadas</h4>
            <p class="stat-number">{{ stats.validated }}</p>
            <a href="{{ url_for('operations_list', status='validated') }}" class="btn btn-sm btn-secondary">Ver</a>
        </div>
        <div class="stat-card stat-warning">
            <h4>Con Discrepancias</h4>
            <p class="stat-number">{{ stats.discrepancy }}</p>
            <a href="{{ url_for('operations_list', status='discrepancy') }}" class="btn btn-sm btn-secondary">Ver</a>
        </div>
    </div>
</div>

<div class="section">
    <h3>Operaciones por Máquina</h3>
    {% if operations_by_machine %}
        <table class="table">
            <thead>
                <tr>
                    <th>ID de Máquina</th>
                    <th>Número de Operaciones</th>
                </tr>
            </thead>
            <tbody>
                {% for machine_id, count in operations_by_machine %}
                <tr>
                    <td>{{ machine_id }}</td>
                    <td>{{ count }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    {% else %}
        <p class="text-muted">No hay datos disponibles.</p>
    {% endif %}
</div>

<div class="section">
    <h3>Acciones</h3>
    <div class="button-group">
        <a href="{{ url_for('operations_list') }}" class="btn btn-primary">Ver Todas las Operaciones</a>
        <a href="{{ url_for('new_operation') }}" class="btn btn-secondary">Crear Nueva Operación</a>
        <a href="{{ url_for('sync_smb') }}" class="btn btn-secondary">Sincronizar con SMB</a>
    </div>
</div>
{% endblock %}
