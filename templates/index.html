{% extends "base.html" %}

{% block title %}Inicio - Portal de Operaciones{% endblock %}

{% block content %}
<div class="page-header">
    <h2>Portal de Operaciones - Scripting Batch</h2>
    <p class="lead">Sistema de gestión y monitoreo de operaciones de escaneo de núcleos de perforación Orexplore</p>
</div>

<div class="stats-grid">
    <div class="stat-card">
        <h3>Total de Operaciones</h3>
        <p class="stat-number">{{ total_operations }}</p>
    </div>
    <div class="stat-card stat-pending">
        <h3>Pendientes</h3>
        <p class="stat-number">{{ pending_operations }}</p>
    </div>
    <div class="stat-card stat-success">
        <h3>Validadas</h3>
        <p class="stat-number">{{ validated_operations }}</p>
    </div>
    <div class="stat-card stat-warning">
        <h3>Con Discrepancias</h3>
        <p class="stat-number">{{ discrepancy_operations }}</p>
    </div>
</div>

<div class="section">
    <h3>Operaciones Recientes</h3>
    {% if recent_operations %}
        <table class="table">
            <thead>
                <tr>
                    <th>ID Núcleo</th>
                    <th>Máquina</th>
                    <th>Operador</th>
                    <th>Fecha de Escaneo</th>
                    <th>Profundidad</th>
                    <th>Estado</th>
                    <th>Acciones</th>
                </tr>
            </thead>
            <tbody>
                {% for operation in recent_operations %}
                <tr>
                    <td>{{ operation.core_id }}</td>
                    <td>{{ operation.machine_id }}</td>
                    <td>{{ operation.operator_name }}</td>
                    <td>{{ operation.scan_date.strftime('%Y-%m-%d') }}</td>
                    <td>{{ operation.depth_from }}m - {{ operation.depth_to }}m</td>
                    <td><span class="badge badge-{{ operation.status }}">{{ operation.status }}</span></td>
                    <td>
                        <a href="{{ url_for('operation_detail', operation_id=operation.id) }}" class="btn btn-sm btn-primary">Ver</a>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    {% else %}
        <p class="text-muted">No hay operaciones registradas.</p>
    {% endif %}
</div>

<div class="section">
    <h3>Acciones Rápidas</h3>
    <div class="button-group">
        <a href="{{ url_for('new_operation') }}" class="btn btn-primary">Crear Nueva Operación</a>
        <a href="{{ url_for('sync_smb') }}" class="btn btn-secondary">Sincronizar con SMB</a>
        <a href="{{ url_for('operations_list') }}" class="btn btn-secondary">Ver Todas las Operaciones</a>
    </div>
</div>
{% endblock %}
